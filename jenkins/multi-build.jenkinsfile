// Jenkinsfile (Scripted Pipeline)
node { // node/agent
    stage('Deploy') {
        String bomVersion = params.VERSION;
        File bomCsvFile = new File("./bom/${params.VERSION}.csv"
    	List<Map<String, String>> jobParameters = bom.toApplicationJobParameterList(bomCsvFile)

    	jobParameters.each {
        	println("Building ${it.APPLICATION}-${it.VERSION}")
        	println("======================================================================")
        	build(job: it.APPLICATION, parameters: [string(name: 'GIT_REF', value: it.GIT_REF), string(name: 'VERSION', value: it.VERSION)])
    	}
    }
}